<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#14b8a6">
    <!-- iOS PWA 지원 (iOS 13+에서 자동 지원됨) -->
    <title>데일리 루틴 - 187 성장케어</title>
    <link rel="stylesheet" href="css/mobile.css">
    <link rel="stylesheet" href="css/routine-mobile.css">
    <link rel="stylesheet" href="css/growth-modal.css">
    <link rel="stylesheet" href="css/date-picker-modal.css">
    <link rel="stylesheet" href="css/routine-calendar-modal.css">
    
    <!-- 조건부 UI 스타일 -->
    <style>
        /* 병원 환자가 아닌 경우 기본적으로 숨김 */
        .measurement-tab[data-tab="detailed"],
        .growth-injection-section {
            display: none;
        }
    </style>
    
    <!-- 로그인 체크 및 아이 데이터 로딩 -->
    <!-- 세션 체크 및 데이터 초기화 -->
    <script src="js/routine-session-check.js"></script>
</head>
<body>
    <!-- 앱 헤더 -->
    <header class="app-header">
        <div class="app-header-content">
            <div class="app-logo">📝</div>
            <div class="app-title">
                <h1>데일리 루틴</h1>
                <p id="selectedChildName">매일의 성장 습관을 기록해요</p>
            </div>
        </div>
    </header>

    <!-- 아이 선택기 -->
    <div class="child-selector-container">
        <div class="child-selector-content">
            <label class="child-selector-label">
                <span class="child-icon">👶</span>
                <span>아이 선택</span>
            </label>
            <select id="childSelector" class="child-selector-dropdown" onchange="onChildChange()">
                <option value="">아이를 선택하세요</option>
            </select>
        </div>
    </div>

    <!-- 날짜 선택 배너 -->
    <div class="date-banner">
        <div class="date-content">
            <div class="date-selector">
                <button class="date-nav-btn" id="prevDateBtn" onclick="changeDate(-1)">◀</button>
                <div class="current-date" id="currentDate" onclick="openRoutineCalendar()">2026년 2월 5일 (수)</div>
                <button class="date-nav-btn" id="nextDateBtn" onclick="changeDate(1)">▶</button>
                <button class="today-btn" onclick="goToToday()">오늘</button>
            </div>
            <input type="date" id="hiddenDatePicker" style="display: none;" onchange="selectDate(this.value)">
            <!-- 뷰 모드 토글 제거 -->
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <main class="main-container">
        <!-- 입력 모드 -->
        <div id="inputView" class="view-content active">
            <!-- 신체 측정 -->
            <section class="routine-section">
                <div class="section-header">
                    <div>
                        <div class="section-icon">📏</div>
                        <h3>신체 측정</h3>
                    </div>
                    <button class="view-growth-btn" onclick="openGrowthDiagnosis()">
                        📊 차트로 보기
                    </button>
                </div>
                
                <!-- 측정 탭 -->
                <div class="measurement-tabs">
                    <button class="measurement-tab active" data-tab="basic" onclick="switchMeasurementTab('basic')">
                        기본 측정
                    </button>
                    <button class="measurement-tab" data-tab="detailed" onclick="switchMeasurementTab('detailed')">
                        자세히 측정 (병원 측정)
                    </button>
                </div>
                
                <!-- 기본 측정 탭 -->
                <div class="measurement-content active" id="basicMeasurement">
                    <!-- 첫 줄: 만나이(자동), 몸무게 -->
                    <div class="input-row-2">
                        <div class="input-group">
                            <label>만 나이 <span class="optional">자동계산</span></label>
                            <input type="text" id="actualAge" placeholder="--" readonly class="readonly-input">
                        </div>
                        <div class="input-group">
                            <label>몸무게 (kg) <span class="required">필수</span></label>
                            <input type="number" id="weight" placeholder="38.5" step="0.1">
                        </div>
                    </div>
                    
                    <!-- 둘째 줄: 키, 예측키(통계) -->
                    <div class="input-row-2">
                        <div class="input-group">
                            <label>키 (cm) <span class="optional">선택</span></label>
                            <input type="number" id="height" placeholder="145.2" step="0.1" onchange="calculateBasicPrediction()">
                        </div>
                        <div class="input-group">
                            <label>
                                예측키 (통계) 
                                <span class="info-icon" onclick="showPredictionHelp()" title="예측키 설명">ⓘ</span>
                                <span class="optional">자동계산</span>
                            </label>
                            <input type="text" id="predictedHeightBasic" placeholder="--" readonly class="readonly-input">
                        </div>
                    </div>
                </div>
                
                <!-- 자세히 측정 탭 (병원 측정) -->
                <div class="measurement-content" id="detailedMeasurement" style="display: none;">
                    <!-- 첫 줄: 만나이(자동), 뼈나이 -->
                    <div class="input-row-2">
                        <div class="input-group">
                            <label>만 나이 <span class="optional">자동계산</span></label>
                            <input type="text" id="actualAgeDetailed" placeholder="--" readonly class="readonly-input">
                        </div>
                        <div class="input-group">
                            <label>뼈 나이 <span class="optional">선택</span></label>
                            <input type="number" id="boneAge" placeholder="입력하세요" step="0.1">
                        </div>
                    </div>
                    
                    <!-- 둘째 줄: 키, 예측키(뼈나이) -->
                    <div class="input-row-2">
                        <div class="input-group">
                            <label>키 (cm) <span class="optional">기본 측정값</span></label>
                            <input type="text" id="heightDetailed" placeholder="--" readonly class="readonly-input">
                        </div>
                        <div class="input-group">
                            <label>예측키 (뼈나이) <span class="optional">직접 입력</span></label>
                            <input type="number" id="predictedHeightBoneAge" placeholder="예측키를 입력하세요" step="0.1" class="editable-input">
                        </div>
                    </div>
                    
                    <!-- 셋째 줄: 메모 (전체 너비) -->
                    <div class="input-group">
                        <label>메모 <span class="optional">선택</span></label>
                        <textarea id="measurementNotesDetailed" placeholder="병원 측정 메모를 입력하세요..." rows="3" style="resize: vertical;"></textarea>
                    </div>
                </div>
            </section>

            <!-- 식사 기록 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">🍽️</div>
                    <h3>식사 기록</h3>
                </div>
                <div class="section-content">
                    <div class="meal-list" id="mealList">
                        <button class="meal-card" onclick="openMealModal('breakfast')">
                            <div class="meal-icon">🌅</div>
                            <div class="meal-info">
                                <div class="meal-name">아침</div>
                                <div class="meal-status" id="breakfastStatus">+ 추가하기</div>
                            </div>
                        </button>
                        <button class="meal-card" onclick="openMealModal('lunch')">
                            <div class="meal-icon">🌞</div>
                            <div class="meal-info">
                                <div class="meal-name">점심</div>
                                <div class="meal-status" id="lunchStatus">+ 추가하기</div>
                            </div>
                        </button>
                        <button class="meal-card" onclick="openMealModal('dinner')">
                            <div class="meal-icon">🌙</div>
                            <div class="meal-info">
                                <div class="meal-name">저녁</div>
                                <div class="meal-status" id="dinnerStatus">+ 추가하기</div>
                            </div>
                        </button>
                        <button class="meal-card" onclick="openMealModal('snack')">
                            <div class="meal-icon">🍪</div>
                            <div class="meal-info">
                                <div class="meal-name">간식</div>
                                <div class="meal-status" id="snackStatus">+ 추가하기</div>
                            </div>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 수면 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">😴</div>
                    <h3>수면</h3>
                </div>
                <div class="section-content">
                    <div class="input-row">
                        <div class="input-group">
                            <label>취침 시간</label>
                            <input type="time" id="sleepTime" value="22:00">
                        </div>
                        <div class="input-group">
                            <label>기상 시간</label>
                            <input type="time" id="wakeTime" value="07:00">
                        </div>
                    </div>
                    <div class="input-group">
                        <label>수면 질</label>
                        <div class="quality-selector">
                            <button class="quality-btn" data-quality="good" onclick="selectQuality('sleep', 'good')">
                                😊 좋음
                            </button>
                            <button class="quality-btn" data-quality="normal" onclick="selectQuality('sleep', 'normal')">
                                😐 보통
                            </button>
                            <button class="quality-btn" data-quality="bad" onclick="selectQuality('sleep', 'bad')">
                                😞 나쁨
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 수분 섭취 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">💧</div>
                    <h3>수분 섭취</h3>
                </div>
                <div class="section-content">
                    <div class="water-tracker">
                        <div class="water-amount">
                            <span id="waterAmount">0</span> ml
                        </div>
                        <div class="water-progress">
                            <div class="water-progress-bar" id="waterProgress"></div>
                        </div>
                        <div class="water-goal">목표: 2000ml</div>
                        <div class="water-buttons">
                            <button onclick="addWater(250)">+250ml</button>
                            <button onclick="addWater(500)">+500ml</button>
                            <button onclick="resetWater()">초기화</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 영양제 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">💊</div>
                    <h3>영양제</h3>
                </div>
                <div class="section-content">
                    <div class="supplement-list">
                        <label class="checkbox-label">
                            <input type="checkbox" name="supplement" value="vitamin-d">
                            <span>비타민D</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="supplement" value="calcium">
                            <span>칼슘</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="supplement" value="zinc">
                            <span>아연</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="supplement" value="multi">
                            <span>종합 비타민</span>
                        </label>
                    </div>
                    <button class="add-custom-btn" onclick="addCustomSupplement()">+ 추가 영양제</button>
                </div>
            </section>

            <!-- 성장 주사 (병원 환자만) -->
            <section class="routine-section growth-injection-section">
                <div class="section-header">
                    <div class="section-icon">💉</div>
                    <h3>성장 주사</h3>
                </div>
                <div class="section-content">
                    <label class="checkbox-label">
                        <input type="checkbox" id="injectionCheck" onchange="toggleInjectionTime()">
                        <span>오늘 맞음</span>
                    </label>
                    <div class="input-group" id="injectionTimeGroup" style="display: none; margin-top: 12px;">
                        <label>시간</label>
                        <input type="time" id="injectionTime" value="21:00">
                    </div>
                </div>
            </section>

            <!-- 운동 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">🏃</div>
                    <h3>운동 기록</h3>
                </div>
                <div class="section-content">
                    <!-- 운동 카테고리 탭 -->
                    <div class="exercise-tabs">
                        <button class="exercise-tab active" data-category="posture" onclick="switchExerciseTab('posture')">
                            바른자세
                        </button>
                        <button class="exercise-tab" data-category="growth" onclick="switchExerciseTab('growth')">
                            성장판자극
                        </button>
                    </div>
                    
                    <!-- 운동 리스트 (스크롤 가능) -->
                    <div class="exercise-scroll-container" id="exerciseScrollContainer">
                        <!-- 동적으로 추가됨 -->
                    </div>
                    
                    <!-- 선택된 운동 요약 -->
                    <div class="selected-exercises-summary" id="selectedSummary">
                        <div class="summary-header">오늘 완료한 운동</div>
                        <div class="summary-content" id="summaryContent">
                            선택된 운동이 없습니다
                        </div>
                    </div>
                </div>
            </section>

            <!-- 메모 & 기분 -->
            <section class="routine-section">
                <div class="section-header">
                    <div class="section-icon">📝</div>
                    <h3>오늘의 기록</h3>
                </div>
                <div class="section-content">
                    <div class="input-group">
                        <label>메모</label>
                        <textarea id="dailyNotes" placeholder="오늘 하루를 기록하세요..." rows="4"></textarea>
                    </div>
                    <div class="input-group">
                        <label>기분</label>
                        <div class="quality-selector">
                            <button class="quality-btn" data-quality="good" onclick="selectQuality('mood', 'good')">
                                😊 좋음
                            </button>
                            <button class="quality-btn" data-quality="normal" onclick="selectQuality('mood', 'normal')">
                                😐 보통
                            </button>
                            <button class="quality-btn" data-quality="bad" onclick="selectQuality('mood', 'bad')">
                                😞 나쁨
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 저장 버튼 -->
            <div class="save-section">
                <button class="save-btn" onclick="saveRoutine()">💾 저장하기</button>
            </div>
        </div>

        <!-- 달력 뷰 (제거됨 - 통계로 통합) -->

        <!-- 통계 뷰 -->
        <div id="statsView" class="view-content" style="display: none;">
            <div class="stats-container">
                <!-- 카테고리 탭 -->
                <div class="stats-category-tabs">
                    <button class="stats-tab active" data-category="all" onclick="switchStatsCategory('all')">
                        📊 전체
                    </button>
                    <button class="stats-tab" data-category="meal" onclick="switchStatsCategory('meal')">
                        🍽️ 식사
                    </button>
                    <button class="stats-tab" data-category="sleep" onclick="switchStatsCategory('sleep')">
                        😴 수면
                    </button>
                    <button class="stats-tab" data-category="exercise" onclick="switchStatsCategory('exercise')">
                        💪 운동
                    </button>
                </div>
                
                <!-- 달력 섹션 (통합) -->
                <div class="calendar-section">
                    <div class="calendar-header">
                        <button class="calendar-nav-btn" onclick="changeCalendarMonth(-1)">◀</button>
                        <h3 class="calendar-title" id="calendarTitle">2026년 2월</h3>
                        <button class="calendar-nav-btn" onclick="changeCalendarMonth(1)">▶</button>
                    </div>
                    
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- 동적으로 생성됨 -->
                    </div>

                    <div class="calendar-legend" id="calendarLegend">
                        <!-- 동적으로 생성됨 -->
                    </div>
                </div>
                
                <!-- 통계 데이터 -->
                <div class="stats-data-section">
                    <!-- 전체 통계 -->
                    <div class="stats-content active" id="statsContentAll">
                        <h4>이번 달 전체 통계</h4>
                        
                        <!-- 완료율 추이 -->
                        <div class="stat-chart">
                            <h5>루틴 완료율 추이</h5>
                            <canvas id="completionChart" height="200"></canvas>
                        </div>
                        
                        <!-- 주간 요약 -->
                        <div class="week-stats">
                            <h5>이번 주 요약</h5>
                            <div class="stat-item">
                                <div class="stat-label">루틴 완료율</div>
                                <div class="stat-value"><span id="weekCompletion">0</span>%</div>
                                <div class="stat-bar">
                                    <div class="stat-bar-fill" id="weekCompletionBar"></div>
                                </div>
                            </div>
                            <div class="stat-row">
                                <div class="stat-item-small">
                                    <div class="stat-label">평균 수면</div>
                                    <div class="stat-value"><span id="avgSleep">0</span>시간</div>
                                </div>
                                <div class="stat-item-small">
                                    <div class="stat-label">운동 시간</div>
                                    <div class="stat-value"><span id="totalExercise">0</span>분</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 식사 통계 -->
                    <div class="stats-content" id="statsContentMeal" style="display: none;">
                        <h4>식사 통계</h4>
                        <div class="meal-health-stats" id="mealHealthStats">
                            <!-- 동적으로 생성됨 -->
                        </div>
                    </div>
                    
                    <!-- 수면 통계 -->
                    <div class="stats-content" id="statsContentSleep" style="display: none;">
                        <h4>수면 패턴</h4>
                        <div class="sleep-stats">
                            <div class="stat-item">
                                <span>평균 취침 시간</span>
                                <strong id="avgSleepTime">--:--</strong>
                            </div>
                            <div class="stat-item">
                                <span>평균 기상 시간</span>
                                <strong id="avgWakeTime">--:--</strong>
                            </div>
                            <div class="stat-item">
                                <span>평균 수면 시간</span>
                                <strong id="avgSleepDuration">-- 시간</strong>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 운동 통계 -->
                    <div class="stats-content" id="statsContentExercise" style="display: none;">
                        <h4>운동 시간 (분)</h4>
                        <div class="exercise-stats" id="exerciseStats">
                            <!-- 동적으로 생성됨 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 하단 네비게이션 -->
    <nav class="bottom-nav">
        <a href="home.html" class="tab-item">
            <div class="tab-icon">🏠</div>
            <div class="tab-label">홈</div>
        </a>
        <a href="routine.html" class="tab-item active">
            <div class="tab-icon">📝</div>
            <div class="tab-label">데일리루틴</div>
        </a>
        <a href="info.html" class="tab-item">
            <div class="tab-icon">📚</div>
            <div class="tab-label">성장가이드</div>
        </a>
        <a href="https://pf.kakao.com/_ZxneSb" target="_blank" class="tab-item">
            <div class="tab-icon">💬</div>
            <div class="tab-label">상담하기</div>
        </a>
    </nav>

    <!-- 식사 추가 모달 -->
    <div class="modal" id="mealModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="mealModalTitle">식사 추가</h3>
                <button class="modal-close" onclick="closeMealModal()">✕</button>
            </div>
            <div class="modal-body">
                <!-- 사진 업로드 -->
                <div class="input-group">
                    <label>식사 사진 <span class="optional">선택</span></label>
                    <div class="photo-upload-area">
                        <input type="file" id="mealPhoto" accept="image/*" style="display: none;" onchange="handleMealPhotoSelect(event)">
                        <button class="photo-upload-btn" onclick="document.getElementById('mealPhoto').click()">
                            📷 사진 추가
                        </button>
                        <div class="photo-preview-container" id="photoPreviewContainer" style="display: none;">
                            <div class="photo-preview">
                                <img id="photoPreview" src="" alt="식사 사진">
                                <button class="photo-remove-btn" onclick="removeMealPhoto()">✕</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>식사 시간</label>
                    <input type="time" id="mealTime">
                </div>
                <div class="input-group">
                    <label>식사 내용</label>
                    <textarea id="mealDescription" placeholder="오늘 먹은 음식을 입력하세요..." rows="3"></textarea>
                </div>
                <div class="input-group">
                    <label>건강도</label>
                    <div class="health-rating">
                        <button class="rating-btn" data-rating="5" onclick="selectRating(5)">⭐⭐⭐⭐⭐</button>
                        <button class="rating-btn" data-rating="4" onclick="selectRating(4)">⭐⭐⭐⭐</button>
                        <button class="rating-btn" data-rating="3" onclick="selectRating(3)">⭐⭐⭐</button>
                        <button class="rating-btn" data-rating="2" onclick="selectRating(2)">⭐⭐</button>
                        <button class="rating-btn" data-rating="1" onclick="selectRating(1)">⭐</button>
                    </div>
                </div>
                <div class="input-group">
                    <label>식사량</label>
                    <div class="portion-selector">
                        <button class="portion-btn" data-portion="large" onclick="selectPortion('large')">많음</button>
                        <button class="portion-btn" data-portion="normal" onclick="selectPortion('normal')">보통</button>
                        <button class="portion-btn" data-portion="small" onclick="selectPortion('small')">적음</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeMealModal()">취소</button>
                <button class="btn-primary" onclick="saveMeal()">저장</button>
            </div>
        </div>
    </div>

    <!-- 운동 추가 모달 -->
    <div class="modal" id="exerciseModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>운동 추가</h3>
                <button class="modal-close" onclick="closeExerciseModal()">✕</button>
            </div>
            <div class="modal-body">
                <div class="input-group">
                    <label>운동 이름</label>
                    <input type="text" id="exerciseName" placeholder="예: 줄넘기, 스트레칭 등">
                </div>
                <div class="input-group">
                    <label>운동 시간 (분)</label>
                    <input type="number" id="exerciseDuration" placeholder="15" min="1">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeExerciseModal()">취소</button>
                <button class="btn-primary" onclick="saveExercise()">저장</button>
            </div>
        </div>
    </div>

    <!-- 유튜브 비디오 모달 -->
    <div class="modal" id="youtubeModal" style="display: none;">
        <div class="modal-content video-modal">
            <div class="modal-header">
                <h3 id="videoTitle">운동 영상</h3>
                <button class="modal-close" onclick="closeYoutubeModal()">✕</button>
            </div>
            <div class="modal-body video-body">
                <div class="video-container">
                    <iframe 
                        id="youtubePlayer" 
                        width="100%" 
                        height="100%" 
                        src="" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                    </iframe>
                </div>
                <div class="video-description" id="videoDescription"></div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeYoutubeModal()">닫기</button>
            </div>
        </div>
    </div>

    <!-- 루틴 달력 모달 -->
    <div class="routine-calendar-modal" id="routineCalendarModal" style="display: none;">
        <div class="routine-calendar-content">
            <div class="routine-calendar-header">
                <h2>📅 데일리 루틴 달력</h2>
                <button class="modal-close-btn" onclick="closeRoutineCalendar()">×</button>
            </div>
            
            <div class="routine-calendar-body">
                <!-- 월 선택 -->
                <div class="calendar-month-selector">
                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(-1)">◀</button>
                    <h3 id="calendarMonthYear">2026년 2월</h3>
                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(1)">▶</button>
                </div>
                
                <!-- 범례 -->
                <div class="calendar-legend-row">
                    <div class="legend-item"><span class="legend-dot" style="background: #8b5cf6;">●</span> 수면</div>
                    <div class="legend-item"><span class="legend-dot" style="background: #3b82f6;">●</span> 수분</div>
                    <div class="legend-item"><span class="legend-dot" style="background: #10b981;">●</span> 식사</div>
                    <div class="legend-item"><span class="legend-dot" style="background: #f59e0b;">●</span> 운동</div>
                    <div class="legend-item"><span class="legend-dot" style="background: #ef4444;">●</span> 영양제</div>
                </div>
                
                <!-- 달력 그리드 -->
                <div class="routine-calendar-grid" id="routineCalendarGrid">
                    <!-- JavaScript로 생성 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 날짜 선택 모달 -->
    <div class="date-picker-modal" id="datePickerModal">
        <div class="date-picker-content">
            <div class="date-picker-header">
                <h3>날짜 선택</h3>
                <button class="modal-close-btn" onclick="closeDatePickerModal()">×</button>
            </div>
            
            <!-- 연도/월 선택 -->
            <div class="year-month-selector">
                <div class="selector-group">
                    <label>연도</label>
                    <div class="selector-wrapper">
                        <button class="selector-btn" onclick="changePickerYear(-1)">◀</button>
                        <div class="selector-display" id="pickerYear">2026</div>
                        <button class="selector-btn" onclick="changePickerYear(1)">▶</button>
                    </div>
                </div>
                <div class="selector-group">
                    <label>월</label>
                    <div class="selector-wrapper">
                        <button class="selector-btn" onclick="changePickerMonth(-1)">◀</button>
                        <div class="selector-display" id="pickerMonth">2월</div>
                        <button class="selector-btn" onclick="changePickerMonth(1)">▶</button>
                    </div>
                </div>
            </div>
            
            <!-- 요일 헤더 -->
            <div class="picker-calendar-grid">
                <div class="picker-calendar-weekday">일</div>
                <div class="picker-calendar-weekday">월</div>
                <div class="picker-calendar-weekday">화</div>
                <div class="picker-calendar-weekday">수</div>
                <div class="picker-calendar-weekday">목</div>
                <div class="picker-calendar-weekday">금</div>
                <div class="picker-calendar-weekday">토</div>
                
                <!-- 날짜 그리드 (동적 생성) -->
                <div id="pickerDaysContainer" style="display: contents;"></div>
            </div>
            
            <!-- 액션 버튼 -->
            <div class="date-picker-actions">
                <button class="picker-btn picker-btn-cancel" onclick="closeDatePickerModal()">취소</button>
                <button class="picker-btn picker-btn-today" onclick="selectPickerToday()">오늘</button>
                <button class="picker-btn picker-btn-confirm" onclick="confirmPickerDate()">확인</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        // Supabase 클라이언트 초기화 (전역 변수로)
        const SUPABASE_URL = 'https://mufjnulwnppgvibmmbfo.supabase.co';
        const SUPABASE_ANON_KEY = 'sb_publishable_3hm8ooVxIZvENDh-D_lWNA_sdPHg9xk';
        var supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        console.log('✅ Supabase 클라이언트 초기화 완료');
    </script>
    <script src="js/korea-growth-standard.js"></script>
    <script src="js/growth-data.js"></script>
    <script src="js/challenge-data.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/growth-diagnosis-modal.js"></script>
    <script src="js/date-picker-modal.js"></script>
    <script src="js/routine-calendar-modal.js"></script>
    <script src="js/routine.js"></script>
</body>
</html>
