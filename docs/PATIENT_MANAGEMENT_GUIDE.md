# 🏥 환자 관리 시스템 사용 가이드

## 🎯 개요

**admin.html**이 완전히 새로운 **환자 관리 시스템**으로 변경되었습니다!

기존의 FAQ/치료 사례 관리 대신, 이제 **실제 병원에서 사용할 수 있는 환자 관리 기능**을 제공합니다.

---

## ✨ 주요 기능

### 1️⃣ **환자 목록 관리**
- 📊 **실시간 통계**: 전체 환자 수, 치료중, 남아, 여아
- 🔍 **검색**: 이름, 차트번호로 빠른 검색
- 🎯 **필터**: 전체 / 남아 / 여아 / 치료중
- 💳 **카드형 UI**: 한눈에 보는 환자 정보

### 2️⃣ **환자 등록**
- **기본 정보**: 이름, 성별, 생년월일, 차트번호, 연락처
- **부모 정보**: 아버지 키, 어머니 키, 희망 키
- **특이사항**: 알레르기, 과거 병력, 주의사항 메모

### 3️⃣ **환자 상세 (3개 탭)**

#### 📋 기본정보 탭
- 환자 기본 정보 요약
- 만 나이 자동 계산
- 부모 키, 희망 키
- 특이사항 표시

#### 📏 측정기록 탭
- 키/몸무게 기록 추가
- 뼈나이, 예측 최종키
- 회차별 메모
- **성장량 자동 계산** (이전 측정 대비)

#### 📊 성장차트 탭
- **표준 성장 곡선**: 5th, 50th, 95th 백분위
- **환자 데이터**: 빨간색 포인트
- **인터랙티브 차트**: Chart.js 기반

---

## 🚀 시작하기

### 1. 페이지 열기
```
http://localhost:8000/admin.html
```

### 2. 초기 샘플 데이터
자동으로 2명의 샘플 환자가 로드됩니다:
- **김민준** (남아, 2011-01-25) - 치료 완료, 5회 측정
- **이서연** (여아, 2013-05-15) - 치료중, 2회 측정

### 3. 환자 추가하기
1. **➕ 새 환자 등록** 버튼 클릭
2. 필수 정보 입력:
   - 이름
   - 성별
   - 생년월일
3. 선택 정보 입력:
   - 차트번호 (자동 생성)
   - 연락처
   - 부모 키
   - 희망 키
   - 특이사항
4. **저장** 클릭

### 4. 환자 상세 보기
1. 환자 카드 클릭
2. 3개 탭 확인:
   - 기본정보
   - 측정기록
   - 성장차트

### 5. 측정 기록 추가
1. 환자 상세 → **측정기록 탭**
2. **➕ 측정 추가** 버튼
3. 정보 입력:
   - 측정일
   - 키 (필수)
   - 몸무게 (필수)
   - 뼈나이 (선택)
   - 예측 최종키 (선택)
   - 메모
4. **저장**

### 6. 성장 차트 확인
1. 환자 상세 → **성장차트 탭**
2. 자동으로 차트 렌더링:
   - 파란색 점선: 백분위 (5th, 50th, 95th)
   - 빨간색 선/점: 환자 데이터

---

## 📂 데이터 저장

### LocalStorage 키
```javascript
admin_patients  // 환자 데이터 배열
```

### 데이터 구조
```javascript
{
  id: "id_1234567890_abcdef",
  name: "홍길동",
  gender: "male",  // male | female
  birthDate: "2013-05-15",
  chartNumber: "P2024001",
  parentPhone: "010-1234-5678",
  fatherHeight: 175,
  motherHeight: 160,
  targetHeight: 180,
  specialNotes: "알레르기 없음",
  status: "ongoing",  // ongoing | completed
  measurements: [
    {
      id: "id_...",
      date: "2024-08-01",
      height: 148.5,
      weight: 42.0,
      boneAge: 10.5,
      predictedHeight: 163.0,
      memo: "초진"
    }
  ],
  createdAt: "2025-01-12T...",
  updatedAt: "2025-01-12T..."
}
```

---

## 🎨 UI 특징

### 색상 테마
- **Primary**: 보라색 그라데이션 (#667eea → #764ba2)
- **치료중**: 초록색 배지
- **치료완료**: 파란색 배지

### 반응형 디자인
- **데스크톱**: 그리드 레이아웃 (3-4열)
- **태블릿**: 2열
- **모바일**: 1열

### 터치 최적화
- 큰 터치 영역
- 부드러운 애니메이션
- 모바일 친화적 폼

---

## 🔄 향후 계획

### Phase 1 (현재) ✅
- [x] 환자 CRUD (추가/조회/수정/삭제)
- [x] 측정 기록 관리
- [x] 성장 차트
- [x] 검색 & 필터

### Phase 2 (계획)
- [ ] Convex 연동 (실시간 동기화)
- [ ] 사용자 앱과 데이터 공유
- [ ] 파일 첨부 (사진, 검사 결과)
- [ ] 진료 예약 관리
- [ ] PDF 리포트 생성
- [ ] 문자/알림 발송

---

## 🆘 문제 해결

### 환자가 표시되지 않음
→ 브라우저 콘솔 확인 (F12)
→ localStorage 확인: `localStorage.getItem('admin_patients')`

### 차트가 표시되지 않음
→ 측정 기록이 1개 이상 있는지 확인
→ Chart.js CDN 로드 확인

### 데이터 초기화
```javascript
localStorage.removeItem('admin_patients');
location.reload();
```

---

## 📞 지원

문제가 있거나 기능 요청이 있으시면 알려주세요! 😊

---

**Made with ❤️ for 연세새봄의원**
