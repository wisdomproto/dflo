# ğŸ¥ ë³‘ì› í™˜ì êµ¬ë¶„ ê¸°ëŠ¥ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

187 ì„±ì¥ì¼€ì–´ ì‹œìŠ¤í…œì—ì„œ **ë³‘ì› í™˜ì**ì™€ **ì¼ë°˜ ì‚¬ìš©ì**ë¥¼ êµ¬ë¶„í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### 1. **ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°**

#### `users` í…Œì´ë¸”ì— `is_patient` ì»¬ëŸ¼ ì¶”ê°€

```sql
ALTER TABLE users
ADD COLUMN IF NOT EXISTS is_patient BOOLEAN DEFAULT false;
```

**ê°’:**
- `true`: ë³‘ì› í™˜ì (ë³‘ì›ì—ì„œ ì •ì‹ìœ¼ë¡œ ê´€ë¦¬í•˜ëŠ” í™˜ì)
- `false`: ì¼ë°˜ ì‚¬ìš©ì (ì•±ë§Œ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ ì‚¬ìš©ì)

---

### 2. **ê´€ë¦¬ì í˜ì´ì§€ ê¸°ëŠ¥**

#### í™˜ì ì¹´ë“œ ë°°ì§€ í‘œì‹œ

ê° í™˜ì ì¹´ë“œì— íƒ€ì…ì„ í‘œì‹œí•˜ëŠ” ë°°ì§€ê°€ ì¶”ê°€ë©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ª ê¹€ë¯¼ì¤€  ğŸ¥ ë³‘ì›í™˜ì          â”‚
â”‚ ğŸ“§ 0001@example.com             â”‚
â”‚ ğŸ“ 010-1234-5678                â”‚
â”‚ ğŸ‘¦ ê¹€ì•„ë“¤ (12ì„¸) ğŸ‘§ ê¹€ë”¸ (10ì„¸)â”‚
â”‚                  [ğŸ‘ï¸ ìƒì„¸ë³´ê¸°] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ª ì´ì„œì—°  ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì        â”‚
â”‚ ğŸ“§ 0002@example.com             â”‚
â”‚ ğŸ“ 010-2345-6789                â”‚
â”‚ ğŸ‘¦ ì´ì•„ë“¤ (15ì„¸)                â”‚
â”‚                  [ğŸ‘ï¸ ìƒì„¸ë³´ê¸°] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í•„í„° ê¸°ëŠ¥

ê´€ë¦¬ì í˜ì´ì§€ ìƒë‹¨ì— í•„í„° ë²„íŠ¼ì´ ì¶”ê°€ë©ë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” í™˜ìëª… ë˜ëŠ” ì•„ì´ ì´ë¦„ ê²€ìƒ‰...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì „ì²´] [ğŸ¥ ë³‘ì›í™˜ì] [ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì]
```

**í•„í„° ë™ì‘:**
- **ì „ì²´**: ëª¨ë“  í™˜ì í‘œì‹œ
- **ğŸ¥ ë³‘ì›í™˜ì**: `is_patient = true`ì¸ í™˜ìë§Œ í‘œì‹œ
- **ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì**: `is_patient = false`ì¸ ì‚¬ìš©ìë§Œ í‘œì‹œ

---

### 3. **ë°ì¼ë¦¬ ë£¨í‹´ í˜ì´ì§€ - ì¡°ê±´ë¶€ UI**

#### ìì„¸íˆ ì¸¡ì • íƒ­ (ë³‘ì› í™˜ìë§Œ)

**ë³‘ì› í™˜ì (`is_patient = true`):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ê¸°ë³¸ ì¸¡ì •] [ìì„¸íˆ ì¸¡ì • (ë³‘ì› ì¸¡ì •)]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¼ë°˜ ì‚¬ìš©ì (`is_patient = false`):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ê¸°ë³¸ ì¸¡ì •]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ì¼ë°˜ ì‚¬ìš©ìëŠ” "ìì„¸íˆ ì¸¡ì •" íƒ­ì´ **ìˆ¨ê²¨ì§**
- ë³‘ì›ì—ì„œ ì¸¡ì •í•˜ëŠ” ë¼ˆë‚˜ì´, PAH ë“±ì˜ ì •ë³´ëŠ” ë³‘ì› í™˜ìë§Œ ì…ë ¥ ê°€ëŠ¥

#### ì„±ì¥ ì£¼ì‚¬ ì„¹ì…˜ (ë³‘ì› í™˜ìë§Œ)

**ë³‘ì› í™˜ì (`is_patient = true`):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’‰ ì„±ì¥ ì£¼ì‚¬                        â”‚
â”‚ â˜‘ï¸ ì˜¤ëŠ˜ ë§ìŒ                        â”‚
â”‚ ì‹œê°„: [21:00]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¼ë°˜ ì‚¬ìš©ì (`is_patient = false`):**
```
(ì„¹ì…˜ ìì²´ê°€ ìˆ¨ê²¨ì§)
```

- ì„±ì¥ ì£¼ì‚¬ëŠ” ë³‘ì› í™˜ìë§Œ í•´ë‹¹ë˜ë¯€ë¡œ ì¼ë°˜ ì‚¬ìš©ìì—ê²ŒëŠ” í‘œì‹œí•˜ì§€ ì•ŠìŒ

---

## ğŸš€ ì„¤ì • ë°©ë²•

### 1. **Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰**

```sql
-- supabase/migration_add_is_patient.sql ì‹¤í–‰

-- 1. ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE users
ADD COLUMN IF NOT EXISTS is_patient BOOLEAN DEFAULT false;

-- 2. ì¸ë±ìŠ¤ ì¶”ê°€
CREATE INDEX IF NOT EXISTS idx_users_is_patient ON users(is_patient);

-- 3. ê¸°ì¡´ í™˜ìë¥¼ ë³‘ì› í™˜ìë¡œ ì„¤ì • (ì˜ˆì‹œ: 1~10ë²ˆ, 46ë²ˆ)
UPDATE users
SET is_patient = true
WHERE email IN (
    '0001@example.com',
    '0002@example.com',
    '0003@example.com',
    '0004@example.com',
    '0005@example.com',
    '0006@example.com',
    '0007@example.com',
    '0008@example.com',
    '0009@example.com',
    '0010@example.com',
    '0046@example.com'
);

-- 4. í™•ì¸
SELECT 
    COUNT(*) as total_users,
    COUNT(*) FILTER (WHERE is_patient = true) as hospital_patients,
    COUNT(*) FILTER (WHERE is_patient = false) as general_users
FROM users;
```

#### ì‹¤í–‰ ë°©ë²•:
1. Supabase ëŒ€ì‹œë³´ë“œ ì ‘ì†: https://supabase.com
2. í”„ë¡œì íŠ¸ ì„ íƒ
3. SQL Editor í´ë¦­
4. `supabase/migration_add_is_patient.sql` íŒŒì¼ ë‚´ìš© ë³µì‚¬
5. ë¶™ì—¬ë„£ê¸° í›„ **Run** í´ë¦­

---

### 2. **íŠ¹ì • í™˜ìë¥¼ ë³‘ì› í™˜ìë¡œ ì„¤ì •**

#### SQLë¡œ ì„¤ì •:

```sql
-- íŠ¹ì • ì´ë©”ì¼ë¡œ ì„¤ì •
UPDATE users
SET is_patient = true
WHERE email = '0001@example.com';

-- íŠ¹ì • IDë¡œ ì„¤ì •
UPDATE users
SET is_patient = true
WHERE id = 'user-uuid-here';

-- ì—¬ëŸ¬ í™˜ì í•œ ë²ˆì— ì„¤ì •
UPDATE users
SET is_patient = true
WHERE email IN (
    '0001@example.com',
    '0002@example.com',
    '0003@example.com'
);
```

#### í™•ì¸:

```sql
-- ë³‘ì› í™˜ì ëª©ë¡ í™•ì¸
SELECT id, email, name, is_patient
FROM users
WHERE is_patient = true
ORDER BY email;
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. **ê´€ë¦¬ì í˜ì´ì§€ í…ŒìŠ¤íŠ¸**

```bash
# ë¡œì»¬ ì„œë²„ ì‹¤í–‰
python -m http.server 8000

# ê´€ë¦¬ì í˜ì´ì§€ ì ‘ì†
http://localhost:8000/admin-dashboard.html

# ë¹„ë°€ë²ˆí˜¸
1234
```

#### ì²´í¬ë¦¬ìŠ¤íŠ¸:
- [ ] í™˜ì ì¹´ë“œì— ë°°ì§€ í‘œì‹œ
  - ğŸ¥ ë³‘ì›í™˜ì (íŒŒë€ìƒ‰)
  - ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì (íšŒìƒ‰)
- [ ] í•„í„° ë²„íŠ¼ ë™ì‘
  - "ì „ì²´" â†’ ëª¨ë“  í™˜ì í‘œì‹œ
  - "ğŸ¥ ë³‘ì›í™˜ì" â†’ ë³‘ì› í™˜ìë§Œ í‘œì‹œ
  - "ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì" â†’ ì¼ë°˜ ì‚¬ìš©ìë§Œ í‘œì‹œ
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ê³¼ í•„í„° í•¨ê»˜ ë™ì‘

---

### 2. **ë°ì¼ë¦¬ ë£¨í‹´ í˜ì´ì§€ í…ŒìŠ¤íŠ¸**

#### ë³‘ì› í™˜ìë¡œ ë¡œê·¸ì¸ (ì˜ˆ: ID 46):

```
http://localhost:8000/
ë¶€ëª¨ ID: 46
ë¹„ë°€ë²ˆí˜¸: 1234
```

**ì˜ˆìƒ ê²°ê³¼:**
- âœ… "ìì„¸íˆ ì¸¡ì • (ë³‘ì› ì¸¡ì •)" íƒ­ í‘œì‹œ
- âœ… "ì„±ì¥ ì£¼ì‚¬" ì„¹ì…˜ í‘œì‹œ

#### ì¼ë°˜ ì‚¬ìš©ìë¡œ ë¡œê·¸ì¸ (ì˜ˆ: ID 11~45):

```
http://localhost:8000/
ë¶€ëª¨ ID: 15
ë¹„ë°€ë²ˆí˜¸: 1234
```

**ì˜ˆìƒ ê²°ê³¼:**
- âŒ "ìì„¸íˆ ì¸¡ì •" íƒ­ ìˆ¨ê²¨ì§
- âŒ "ì„±ì¥ ì£¼ì‚¬" ì„¹ì…˜ ìˆ¨ê²¨ì§

---

### 3. **ì½˜ì†” ë¡œê·¸ í™•ì¸**

**ì •ìƒ ë¡œê·¸:**
```
âœ… [routine.js] ì‚¬ìš©ì ì •ë³´ ë¡œë“œ: {id: "...", name: "..."}
âœ… [routine.js] ë³‘ì› í™˜ì ì—¬ë¶€: true
âœ… [routine.js] UI ì—…ë°ì´íŠ¸ ì™„ë£Œ (ë³‘ì›í™˜ì: true)
```

**ì¼ë°˜ ì‚¬ìš©ì ë¡œê·¸:**
```
âœ… [routine.js] ì‚¬ìš©ì ì •ë³´ ë¡œë“œ: {id: "...", name: "..."}
âœ… [routine.js] ë³‘ì› í™˜ì ì—¬ë¶€: false
âœ… [routine.js] UI ì—…ë°ì´íŠ¸ ì™„ë£Œ (ë³‘ì›í™˜ì: false)
```

---

## ğŸ“Š í†µê³„ í™•ì¸

### ë³‘ì› í™˜ì í†µê³„:

```sql
-- ì „ì²´ í†µê³„
SELECT 
    COUNT(*) as ì „ì²´ì‚¬ìš©ì,
    COUNT(*) FILTER (WHERE is_patient = true) as ë³‘ì›í™˜ì,
    COUNT(*) FILTER (WHERE is_patient = false) as ì¼ë°˜ì‚¬ìš©ì,
    ROUND(100.0 * COUNT(*) FILTER (WHERE is_patient = true) / COUNT(*), 1) as ë³‘ì›í™˜ìë¹„ìœ¨
FROM users
WHERE role = 'parent';
```

**ì˜ˆìƒ ê²°ê³¼:**
```
ì „ì²´ì‚¬ìš©ì | ë³‘ì›í™˜ì | ì¼ë°˜ì‚¬ìš©ì | ë³‘ì›í™˜ìë¹„ìœ¨
-------------------------------------------------
    46     |    11    |     35    |    23.9%
```

---

## ğŸ¨ UI ìŠ¤íƒ€ì¼

### CSS ë°°ì§€ ìŠ¤íƒ€ì¼:

```css
.badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-left: 8px;
}

/* ë³‘ì› í™˜ì ë°°ì§€ */
.badge-hospital {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #3b82f6;
}

/* ì¼ë°˜ ì‚¬ìš©ì ë°°ì§€ */
.badge-general {
    background: #f3f4f6;
    color: #6b7280;
    border: 1px solid #d1d5db;
}
```

---

## ğŸ”§ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ë³‘ì› í™˜ì ì„¤ì • ë³€ê²½:

```javascript
// js/admin.js - renderPatients()
const patientBadge = patient.is_patient 
    ? '<span class="badge badge-hospital">ğŸ¥ ë³‘ì›í™˜ì</span>' 
    : '<span class="badge badge-general">ğŸ‘¤ ì¼ë°˜ì‚¬ìš©ì</span>';
```

### ì¡°ê±´ë¶€ UI ë¡œì§ ë³€ê²½:

```javascript
// js/routine.js - updateUIByPatientType()
function updateUIByPatientType() {
    // ìì„¸íˆ ì¸¡ì • íƒ­
    const detailedTab = document.querySelector('[data-tab="detailed"]');
    if (detailedTab) {
        detailedTab.style.display = isPatient ? 'block' : 'none';
    }
    
    // ì„±ì¥ ì£¼ì‚¬ ì„¹ì…˜
    const growthInjectionSection = document.querySelector('.growth-injection-section');
    if (growthInjectionSection) {
        growthInjectionSection.style.display = isPatient ? 'block' : 'none';
    }
}
```

---

## ğŸ“ ê´€ë ¨ íŒŒì¼

### ìˆ˜ì •ëœ íŒŒì¼:
1. **`supabase/migration_add_is_patient.sql`** - ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
2. **`js/admin.js`** - ê´€ë¦¬ì í˜ì´ì§€ í•„í„°ë§ ë¡œì§
3. **`admin-dashboard.html`** - í•„í„° ë²„íŠ¼ UI
4. **`css/admin.css`** - ë°°ì§€ ìŠ¤íƒ€ì¼
5. **`js/routine.js`** - ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ë° ì¡°ê±´ë¶€ UI
6. **`routine.html`** - ì„±ì¥ì£¼ì‚¬ ì„¹ì…˜ í´ë˜ìŠ¤ ì¶”ê°€

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 1. **í•„í„°ê°€ ë™ì‘í•˜ì§€ ì•ŠìŒ**

**í™•ì¸ ì‚¬í•­:**
- [ ] Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ì™„ë£Œ
- [ ] `is_patient` ì»¬ëŸ¼ ì¡´ì¬ í™•ì¸
- [ ] í™˜ì ë°ì´í„°ì— `is_patient` ê°’ ì„¤ì •

**í•´ê²° ë°©ë²•:**
```sql
-- ì»¬ëŸ¼ í™•ì¸
SELECT column_name, data_type 
FROM information_schema.columns 
WHERE table_name = 'users' AND column_name = 'is_patient';

-- ê°’ í™•ì¸
SELECT id, email, name, is_patient 
FROM users 
LIMIT 10;
```

---

### 2. **ë°ì¼ë¦¬ ë£¨í‹´ì—ì„œ íƒ­ì´ ìˆ¨ê²¨ì§€ì§€ ì•ŠìŒ**

**í™•ì¸ ì‚¬í•­:**
- [ ] `loadUserInfo()` í•¨ìˆ˜ ì‹¤í–‰ í™•ì¸
- [ ] `isPatient` ë³€ìˆ˜ ê°’ í™•ì¸
- [ ] `updateUIByPatientType()` í•¨ìˆ˜ ì‹¤í–‰ í™•ì¸

**í•´ê²° ë°©ë²•:**
```javascript
// ì½˜ì†”ì—ì„œ í™•ì¸
console.log('í˜„ì¬ ì‚¬ìš©ì:', currentUser);
console.log('ë³‘ì› í™˜ì ì—¬ë¶€:', isPatient);
```

---

### 3. **ë°°ì§€ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ**

**í™•ì¸ ì‚¬í•­:**
- [ ] `css/admin.css` ë¡œë“œ í™•ì¸
- [ ] `.badge` ìŠ¤íƒ€ì¼ ì¡´ì¬ í™•ì¸

**í•´ê²° ë°©ë²•:**
- Ctrl + Shift + Rë¡œ ê°•ë ¥ ìƒˆë¡œê³ ì¹¨

---

## ğŸ“ˆ í–¥í›„ ê°œì„  ì‚¬í•­

### ë‹¨ê¸°:
1. â³ ë³‘ì› í™˜ì ë“±ë¡ ì–‘ì‹ ì¶”ê°€ (ê´€ë¦¬ì í˜ì´ì§€)
2. â³ ì¼ë°˜ ì‚¬ìš©ì â†’ ë³‘ì› í™˜ì ì „í™˜ ê¸°ëŠ¥
3. â³ ë³‘ì› í™˜ì í†µê³„ ëŒ€ì‹œë³´ë“œ

### ì¥ê¸°:
1. â³ ë³‘ì›ë³„ í™˜ì ê´€ë¦¬ (ë©€í‹° ë³‘ì› ì§€ì›)
2. â³ í™˜ì ë“±ê¸‰ ì‹œìŠ¤í…œ (VIP, ì¼ë°˜ ë“±)
3. â³ ì§„ë£Œ ê¸°ë¡ ì—°ë™

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- **[README](../README.md)**
- **[ê´€ë¦¬ì ë°ì¼ë¦¬ ë£¨í‹´ ë‹¬ë ¥](ADMIN_DAILY_ROUTINES_CALENDAR.md)**
- **[Supabase ì„¤ì • ê°€ì´ë“œ](SUPABASE_SETUP.md)**

---

**ì‘ì„± ì¼ì‹œ**: 2026-02-04  
**ì‘ì„±ì**: AI Assistant  
**ìƒíƒœ**: âœ… ì™„ë£Œ
