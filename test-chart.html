<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart.js í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .chart-wrapper {
            height: 400px;
            background: white;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 20px 0;
        }
        h1 { color: #333; }
        .info {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š Chart.js í™˜ì ë°ì´í„° í…ŒìŠ¤íŠ¸</h1>
        
        <div class="info">
            <h3>í…ŒìŠ¤íŠ¸ ëª©ì </h3>
            <p>í™˜ì ë°ì´í„° í¬ì¸íŠ¸ê°€ ë°±ë¶„ìœ„ì„ ê³¼ í•¨ê»˜ ì œëŒ€ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸</p>
            <p><strong>ë¹¨ê°„ ì  (10px)</strong>ì´ ëª…í™•íˆ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤!</p>
        </div>
        
        <div class="chart-wrapper">
            <canvas id="testChart"></canvas>
        </div>
        
        <div id="debug" style="background: #fffacd; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px;"></div>
    </div>
    
    <script>
        console.log('ğŸ”µ í…ŒìŠ¤íŠ¸ ì‹œì‘');
        
        // í™˜ì ë°ì´í„° (ê¹€ë¯¼ì¤€)
        const patientData = [
            { x: 12.25, y: 155.7 },
            { x: 12.79, y: 161.6 },
            { x: 13.22, y: 166.4 },
            { x: 13.73, y: 172.0 },
            { x: 13.99, y: 174.8 }
        ];
        
        console.log('ğŸ“Š í™˜ì ë°ì´í„°:', patientData);
        
        // ë°±ë¶„ìœ„ ë°ì´í„° (ê°„ë‹¨í•œ ìƒ˜í”Œ)
        const ages = [10, 11, 12, 13, 14, 15, 16, 17, 18];
        const p5 = [128, 132, 137, 144, 152, 159, 163, 165, 166];
        const p95 = [140, 147, 155, 164, 172, 177, 179, 180, 181];
        
        const percentile5 = ages.map((age, i) => ({ x: age, y: p5[i] }));
        const percentile95 = ages.map((age, i) => ({ x: age, y: p95[i] }));
        
        console.log('ğŸ“Š 5th ë°±ë¶„ìœ„:', percentile5);
        console.log('ğŸ“Š 95th ë°±ë¶„ìœ„:', percentile95);
        
        const ctx = document.getElementById('testChart').getContext('2d');
        
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [
                    // í™˜ì ë°ì´í„°
                    {
                        type: 'line',
                        label: 'ğŸ‘¶ ê¹€ë¯¼ì¤€ì˜ ì„±ì¥ ê¸°ë¡',
                        data: patientData,
                        borderColor: '#dc2626',
                        backgroundColor: '#dc2626',
                        borderWidth: 4,
                        pointRadius: 10,
                        pointHoverRadius: 12,
                        pointBackgroundColor: '#dc2626',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 3,
                        pointStyle: 'circle',
                        tension: 0.3,
                        fill: false,
                        order: 0,
                        showLine: true
                    },
                    // 5th ë°±ë¶„ìœ„
                    {
                        label: '5th ë°±ë¶„ìœ„',
                        data: percentile5,
                        borderColor: '#93c5fd',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        tension: 0.4,
                        order: 100,
                        fill: false
                    },
                    // 95th ë°±ë¶„ìœ„
                    {
                        label: '95th ë°±ë¶„ìœ„',
                        data: percentile95,
                        borderColor: '#1e40af',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        borderDash: [5, 5],
                        pointRadius: 0,
                        tension: 0.4,
                        order: 100,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        type: 'linear',
                        title: {
                            display: true,
                            text: 'ë§Œ ë‚˜ì´ (ì„¸)',
                            font: { size: 14, weight: 'bold' }
                        },
                        min: 10,
                        max: 18
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'í‚¤ (cm)',
                            font: { size: 14, weight: 'bold' }
                        },
                        min: 120,
                        max: 185,
                        ticks: {
                            stepSize: 10
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: { size: 12, weight: '600' }
                        }
                    },
                    tooltip: {
                        enabled: true,
                        mode: 'nearest',
                        intersect: true
                    }
                }
            }
        });
        
        console.log('ğŸ“Š ì°¨íŠ¸ ìƒì„± ì™„ë£Œ');
        console.log('ğŸ“Š ì „ì²´ ë°ì´í„°ì…‹ ìˆ˜:', chart.data.datasets.length);
        
        // ë””ë²„ê·¸ ì •ë³´ ì¶œë ¥
        let debugHtml = '<h4>ğŸ“Š Chart.js ë””ë²„ê·¸ ì •ë³´</h4>';
        chart.data.datasets.forEach((ds, index) => {
            debugHtml += `<p><strong>Dataset ${index}:</strong> ${ds.label} | order: ${ds.order} | ë°ì´í„°: ${ds.data.length}ê°œ | pointRadius: ${ds.pointRadius}</p>`;
            if (ds.order === 0) {
                debugHtml += `<p style="color: red;">â–¶ ì²« ë²ˆì§¸ í¬ì¸íŠ¸: x=${ds.data[0].x}, y=${ds.data[0].y}</p>`;
            }
        });
        
        document.getElementById('debug').innerHTML = debugHtml;
        
        console.log('âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
        
        // í™˜ì ë°ì´í„°ì…‹ í™•ì¸
        const patientDs = chart.data.datasets.find(d => d.order === 0);
        if (patientDs) {
            console.log('âœ… í™˜ì ë°ì´í„°ì…‹:', patientDs);
            console.log('âœ… í¬ì¸íŠ¸ ê°œìˆ˜:', patientDs.data.length);
            console.log('âœ… ì²« í¬ì¸íŠ¸:', patientDs.data[0]);
        }
    </script>
</body>
</html>
