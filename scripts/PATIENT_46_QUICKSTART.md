# 🎯 46번째 환자 빠른 실행 가이드

## 1️⃣ Supabase SQL 실행

### 방법 1: Supabase Dashboard (권장)
1. https://supabase.com 접속
2. 프로젝트 선택
3. 왼쪽 메뉴 → **SQL Editor** 클릭
4. **New query** 클릭
5. `scripts/create_patient_46.sql` 내용 전체 복사
6. 붙여넣기
7. **Run** 버튼 클릭 (또는 Ctrl+Enter)
8. 성공 메시지 확인: `✅ 46번째 환자 및 데일리 루틴 데이터 생성 완료!`

### 방법 2: 직접 확인 쿼리
```sql
-- 1. 부모 확인
SELECT * FROM users WHERE email = '0046@example.com';

-- 2. 자녀 확인
SELECT c.*, cri.* 
FROM children c
LEFT JOIN child_required_info cri ON c.id = cri.child_id
WHERE c.name = '김성장';

-- 3. 측정 기록 개수
SELECT COUNT(*) as measurement_count
FROM measurements m
JOIN children c ON m.child_id = c.id
WHERE c.name = '김성장';

-- 4. 데일리 루틴 개수
SELECT COUNT(*) as routine_count
FROM daily_routines dr
JOIN children c ON dr.child_id = c.id
WHERE c.name = '김성장';
```

---

## 2️⃣ 로그인 테스트

```
URL: http://localhost:8000/
부모 ID: 46
비밀번호: 1234
```

또는 빠른 로그인 버튼 사용 불가 (1~30까지만 있음)

---

## 3️⃣ 관리자 페이지 확인

### 접속 방법
```
http://localhost:8000/admin-dashboard.html
```

또는 홈화면 오른쪽 상단 ⚙️ 아이콘 클릭 → 비밀번호 `1234` 입력

### 확인 순서
1. **환자 검색**
   - 검색창에 "테스트 부모46" 또는 "김성장" 입력
   
2. **환자 상세 보기**
   - 환자 카드 클릭 또는 "👁️ 상세보기" 버튼 클릭
   
3. **자녀 정보 확인**
   - 이름: 김성장 (👦 남아)
   - 생년월일: 2013-03-15 (만 12세)
   
4. **측정 기록 확인**
   - 7개 기록 표시
   - 성장 곡선 그래프 표시
   - 148.5cm → 172.5cm (총 24cm 성장)
   
5. **📅 데일리 루틴 섹션 확인**
   - 14일간의 루틴 데이터 테이블
   - 날짜/키/몸무게/수면/수분/식사/운동/영양제/성장주사/기분
   
6. **데일리 루틴 상세 보기**
   - 각 행의 "👁️ 보기" 버튼 클릭
   - 상세 정보 모달 확인

---

## 4️⃣ 기대 결과 스크린샷

### 📊 측정 기록 테이블
```
날짜       | 키(cm) | 몸무게(kg) | 실제나이 | 뼈나이 | PAH(cm)
--------------------------------------------------------------
2023-03-15 | 148.5  | 42.0       | 10.0     | 9.5    | 168.0
2023-09-15 | 152.3  | 45.5       | 10.5     | 10.0   | 170.5
2024-03-15 | 157.8  | 49.2       | 11.0     | 10.5   | 173.2
2024-09-15 | 162.4  | 52.8       | 11.5     | 11.0   | 175.8
2025-03-15 | 166.9  | 56.3       | 12.0     | 11.5   | 177.5
2025-09-15 | 170.2  | 59.1       | 12.5     | 12.0   | 178.9
2026-02-04 | 172.5  | 61.5       | 12.9     | 12.3   | 179.5
```

### 📅 데일리 루틴 테이블 (샘플)
```
날짜       | 키   | 몸무게 | 수면     | 수분   | 식사 | 운동 | 영양제 | 주사 | 기분
------------------------------------------------------------------------------------
2026-02-04 | 172.5| 61.5   | 9.0시간  | 1800ml | 1끼  | 0개  | 2개    | ✅   | 😊
2026-02-03 | 172.5| 62.1   | 9.0시간  | 2300ml | 3끼  | 2개  | 3개    | -    | 🎉
2026-02-02 | 172.5| 62.0   | 8.5시간  | 1750ml | 3끼  | 1개  | 1개    | ✅   | 😐
2026-02-01 | 172.5| 61.9   | 8.5시간  | 1900ml | 3끼  | 2개  | 2개    | ✅   | 😊
...
```

---

## 5️⃣ 콘솔 로그 확인 (F12)

브라우저 개발자 도구(F12) → Console 탭에서:

```
📅 [관리자] 데일리 루틴 로드 시작: c47ac10b-58cc-4372-a567-0e02b2c3d479
✅ [관리자] 14개 데일리 루틴 로드 완료
```

---

## 6️⃣ 문제 해결

### 문제: 데이터가 보이지 않음
**해결책**:
1. Supabase SQL Editor에서 확인 쿼리 실행
2. 데이터가 없으면 `create_patient_46.sql` 다시 실행
3. 브라우저 캐시 클리어 (Ctrl+Shift+R)

### 문제: 데일리 루틴 섹션이 빈 상태
**해결책**:
1. F12 → Console 확인하여 오류 메시지 확인
2. 🔄 새로고침 버튼 클릭
3. 페이지 새로고침 (Ctrl+Shift+R)

### 문제: 모달이 열리지 않음
**해결책**:
1. `js/admin-daily-routines.js` 파일이 로드되었는지 확인
2. `admin-dashboard.html`에 스크립트 태그 추가 확인
3. F12 → Console에서 JavaScript 오류 확인

---

## 📊 데이터 요약

| 항목 | 값 |
|------|-----|
| 부모 | 테스트 부모46 (0046@example.com) |
| 자녀 | 김성장 (남아, 12.9세) |
| 측정 기록 | 7개 (2023-03-15 ~ 2026-02-04) |
| 데일리 루틴 | 14개 (2026-01-22 ~ 2026-02-04) |
| 성장 | 148.5cm → 172.5cm (24cm) |
| 성장 주사 | 10/14일 (71.4%) |
| 평균 수면 | 8.7시간 |
| 평균 수분 | 1,907ml |

---

## ✅ 체크리스트

- [ ] Supabase에서 SQL 실행 완료
- [ ] 부모 로그인 테스트 성공
- [ ] 관리자 페이지 접속 성공
- [ ] 환자 "테스트 부모46" 검색 성공
- [ ] 환자 상세 페이지 표시 확인
- [ ] 자녀 "김성장" 정보 확인
- [ ] 📊 측정 기록 7개 표시 확인
- [ ] 📈 성장 곡선 그래프 표시 확인
- [ ] 📅 데일리 루틴 섹션 표시 확인
- [ ] 📅 데일리 루틴 14개 행 표시 확인
- [ ] 👁️ 보기 버튼으로 상세 모달 확인
- [ ] 상세 모달 내용 확인 (식사, 운동, 수면 등)

---

🎉 **모든 체크리스트 완료 시 성공!**

궁금한 점이나 문제가 있으면 Console(F12)의 로그를 확인하세요!
